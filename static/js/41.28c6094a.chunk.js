"use strict";(self.webpackChunkmy_portfolio=self.webpackChunkmy_portfolio||[]).push([[41],{1710:(e,t,s)=>{async function l(e,t){try{const s=`https://nominatim.openstreetmap.org/reverse?lat=${e}&lon=${t}&format=json&accept-language=ru`,l=await fetch(s,{headers:{"User-Agent":"my-portfolio/1.0"}});if(!l.ok)return"";const o=await l.json();return o.address.city||o.address.town||o.address.village||o.address.state||o.address.country||""}catch(s){return""}}s.d(t,{R:()=>l})},2662:(e,t,s)=>{s.d(t,{A:()=>r});var l=s(5043),o=s(579);const a=["\u041c\u043e\u0441\u043a\u0432\u0430","\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433","\u041d\u043e\u0432\u043e\u0441\u0438\u0431\u0438\u0440\u0441\u043a","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0431\u0443\u0440\u0433","\u041a\u0430\u0437\u0430\u043d\u044c","\u041d\u0438\u0436\u043d\u0438\u0439 \u041d\u043e\u0432\u0433\u043e\u0440\u043e\u0434","\u0427\u0435\u043b\u044f\u0431\u0438\u043d\u0441\u043a","\u0421\u0430\u043c\u0430\u0440\u0430","\u0420\u043e\u0441\u0442\u043e\u0432-\u043d\u0430-\u0414\u043e\u043d\u0443","\u0423\u0444\u0430","\u041a\u0440\u0430\u0441\u043d\u043e\u044f\u0440\u0441\u043a","\u0412\u043e\u0440\u043e\u043d\u0435\u0436","\u041f\u0435\u0440\u043c\u044c","\u0412\u043e\u043b\u0433\u043e\u0433\u0440\u0430\u0434","\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440","\u0421\u043e\u0447\u0438","\u041e\u043c\u0441\u043a","\u0422\u044e\u043c\u0435\u043d\u044c","\u0418\u0440\u043a\u0443\u0442\u0441\u043a","\u0425\u0430\u0431\u0430\u0440\u043e\u0432\u0441\u043a","\u0412\u043b\u0430\u0434\u0438\u0432\u043e\u0441\u0442\u043e\u043a","\u042f\u0440\u043e\u0441\u043b\u0430\u0432\u043b\u044c","\u0422\u043e\u043c\u0441\u043a","\u0411\u0430\u0440\u043d\u0430\u0443\u043b","\u041a\u0430\u043b\u0438\u043d\u0438\u043d\u0433\u0440\u0430\u0434","\u0421\u0430\u0440\u0430\u0442\u043e\u0432","\u0422\u0443\u043b\u0430","\u041a\u0430\u043b\u0443\u0433\u0430","\u041a\u0443\u0440\u0441\u043a","\u0411\u0435\u043b\u0433\u043e\u0440\u043e\u0434","\u0414\u0440\u0443\u0433\u043e\u0439..."],r=e=>{let{value:t,onChange:s,placeholder:r="\u0413\u043e\u0440\u043e\u0434, \u0441\u0442\u0440\u0430\u043d\u0430"}=e;const[n,i]=(0,l.useState)([]),[d,c]=(0,l.useState)(!1);return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",value:t,onChange:e=>{const t=e.target.value;if(s(t),t.length>0){const e=a.filter((e=>e.toLowerCase().includes(t.toLowerCase())));i(e.length?e:["\u0414\u0440\u0443\u0433\u043e\u0439..."]),c(!0)}else i([]),c(!1)},placeholder:r,className:"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",autoComplete:"off",onFocus:()=>t&&c(!0),onBlur:()=>setTimeout((()=>c(!1)),100)}),d&&n.length>0&&(0,o.jsx)("ul",{className:"absolute z-10 left-0 right-0 bg-[#23272f] border border-[#374151] rounded-lg mt-1 max-h-48 overflow-y-auto shadow-lg",children:n.map(((e,t)=>(0,o.jsx)("li",{className:"px-4 py-2 cursor-pointer hover:bg-blue-600 hover:text-white text-gray-200",onMouseDown:()=>(e=>{s("\u0414\u0440\u0443\u0433\u043e\u0439..."===e?"":e),c(!1)})(e),children:e},e+t)))})]})}},6041:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var l=s(5043),o=s(5016),a=s(6662),r=s(6355),n=s(4765),i=s(579);const d=e=>{let{message:t,type:s="success",onClose:o,duration:a=3e3}=e;(0,l.useEffect)((()=>{const e=setTimeout((()=>{o()}),a);return()=>clearTimeout(e)}),[a,o]);const r="success"===s?"bg-green-500":"bg-red-500";return(0,i.jsx)("div",{className:"fixed inset-x-0 top-4 mx-auto z-50 flex justify-center animate-fade-in-down pointer-events-none",children:(0,i.jsx)("div",{className:`${r} text-white px-6 py-3 rounded-lg shadow-lg max-w-sm text-center pointer-events-auto`,children:t})})};var c=s(2095),u=s(2662),m=s(1710);const x=()=>{const{user:e,logout:t,updateUserProfile:s}=(0,o.As)(),x=(0,a.Zp)(),[b,h]=(0,l.useState)({fullName:"",phone:"",displayName:"",bio:"",location:"",skills:"",github:"",website:"",email:""}),[g,p]=(0,l.useState)(!1),[f,y]=(0,l.useState)({show:!1,message:"",type:"success"}),[v,w]=(0,l.useState)(""),[N,j]=(0,l.useState)({}),[k,C]=(0,l.useState)(null);(0,l.useEffect)((()=>{let t;return e&&(t=(0,n.Xd)(e.uid,(t=>{let s=t.location||"";if(!s&&"undefined"!==typeof window){const e=localStorage.getItem("userLocation");if(e&&"denied"!==e&&"unsupported"!==e)try{const{lat:t,lon:s}=JSON.parse(e);(0,m.R)(t,s).then((e=>{e&&h((t=>({...t,location:e})))}))}catch{}}h({fullName:t.fullName||"",phone:t.phone||"",displayName:t.displayName||"",bio:t.bio||"",location:s,skills:t.skills||"",github:t.github||"",website:t.website||"",email:e.email||""})}))),()=>{t&&t()}}),[e]);const S=function(e){y({show:!0,message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"})};return(0,l.useEffect)((()=>{if(!e)return;k&&clearTimeout(k);const t=function(e){const t={};return(!e.fullName||e.fullName.trim().length<3)&&(t.fullName="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0424\u0418\u041e (\u043c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430)"),/^\+7 \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(e.phone)||(t.phone="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 +7 (XXX) XXX-XX-XX"),e.email&&/^\S+@\S+\.\S+$/.test(e.email)||(t.email="\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"),(!e.location||e.location.trim().length<2)&&(t.location="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"),t}(b);if(j(t),0===Object.keys(t).length){const e=setTimeout((()=>{s(b).catch((e=>{w("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f: "+(e.message||String(e)))}))}),1e3);return C(e),()=>clearTimeout(e)}}),[b]),e?(0,i.jsx)("div",{className:"min-h-screen bg-[#121212] py-12 px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"max-w-xl mx-auto bg-[#23272f] rounded-2xl shadow-2xl overflow-hidden border border-[#2d3748]",children:[f.show&&(0,i.jsx)("div",{className:"pointer-events-none",children:(0,i.jsx)(d,{message:f.message,type:f.type,onClose:()=>{y({show:!1,message:"",type:"success"})}})}),(0,i.jsxs)("div",{className:"px-8 py-8 sm:p-10",children:[(0,i.jsx)("div",{className:"flex justify-end mb-6",children:(0,i.jsx)("button",{onClick:async()=>{p(!0);try{await t(),x("/")}catch(e){S("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u0445\u043e\u0434\u0435 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437","error"),console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u044b\u0445\u043e\u0434\u0435:",e)}finally{p(!1)}},disabled:g,className:"px-5 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white font-semibold shadow-md transition disabled:opacity-60",children:g?"\u0412\u044b\u0445\u043e\u0434...":"\u0412\u044b\u0439\u0442\u0438"})}),(0,i.jsx)("h3",{className:"text-2xl font-bold text-white mb-8 text-center tracking-wide",children:"\u041b\u0438\u0447\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),v&&(0,i.jsx)("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-2 rounded mb-4",children:v}),(0,i.jsxs)("form",{className:"space-y-6",onSubmit:e=>{e.preventDefault(),(async()=>{p(!0),w("");try{await s(b),S("\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d")}catch(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f:",e),w(e.message||String(e)),S("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f","error")}finally{p(!1)}})()},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"\u0424\u0418\u041e"}),(0,i.jsx)("input",{type:"text",value:b.fullName,onChange:e=>h({...b,fullName:e.target.value}),placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e",className:`w-full px-4 py-3 rounded-lg bg-[#181c23] border ${N.fullName?"border-red-500":"border-[#374151]"} text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition`,required:!0}),N.fullName&&(0,i.jsx)("div",{className:"text-red-400 text-xs mt-1",children:N.fullName})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,i.jsx)(c._g,{mask:"+7 (000) 000-00-00",value:b.phone,onAccept:e=>h({...b,phone:e}),unmask:!1,placeholder:"+7 (___) ___-__-__",className:`w-full px-4 py-3 rounded-lg bg-[#181c23] border ${N.phone?"border-red-500":"border-[#374151]"} text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition`,required:!0}),N.phone&&(0,i.jsx)("div",{className:"text-red-400 text-xs mt-1",children:N.phone})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),(0,i.jsx)("input",{type:"email",value:b.email,readOnly:!0,className:`w-full px-4 py-3 rounded-lg bg-[#181c23] border ${N.email?"border-red-500":"border-[#374151]"} text-gray-400 cursor-not-allowed`}),N.email&&(0,i.jsx)("div",{className:"text-red-400 text-xs mt-1",children:N.email})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"\u041e \u0441\u0435\u0431\u0435"}),(0,i.jsx)("textarea",{value:b.bio,onChange:e=>h({...b,bio:e.target.value}),rows:"3",placeholder:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435...",className:"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"\u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"}),(0,i.jsx)(u.A,{value:b.location,onChange:e=>h({...b,location:e}),placeholder:"\u0413\u043e\u0440\u043e\u0434, \u0441\u0442\u0440\u0430\u043d\u0430"}),N.location&&(0,i.jsx)("div",{className:"text-red-400 text-xs mt-1",children:N.location})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"\u041d\u0430\u0432\u044b\u043a\u0438"}),(0,i.jsx)("input",{type:"text",value:b.skills,onChange:e=>h({...b,skills:e.target.value}),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: React, Node.js, Python",className:"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"GitHub"}),(0,i.jsx)("input",{type:"url",value:b.github,onChange:e=>h({...b,github:e.target.value}),placeholder:"https://github.com/username",className:"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),(0,i.jsx)("input",{type:"url",value:b.website,onChange:e=>h({...b,website:e.target.value}),placeholder:"https://example.com",className:"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]})]}),(0,i.jsx)("div",{className:"pt-6",children:(0,i.jsx)("button",{type:"submit",disabled:g,className:"w-full py-3 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold text-lg shadow-md transition disabled:opacity-60",children:g?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"})})]})]})]})}):(0,i.jsx)(r.A,{})}}}]);
//# sourceMappingURL=41.28c6094a.chunk.js.map