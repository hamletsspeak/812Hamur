{"version":3,"file":"static/js/340.a94a161d.chunk.js","mappings":"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","sources":["components/Auth.js","services/storageService.js","components/Toast.js","Profile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport PhoneInput from 'react-phone-input-2';\nimport 'react-phone-input-2/lib/style.css';\nimport { RecaptchaVerifier } from 'firebase/auth';\nimport { auth } from '../firebase';\n\nconst Auth = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [verificationCode, setVerificationCode] = useState('');\n  const [authMethod, setAuthMethod] = useState('email');\n  const [isLogin, setIsLogin] = useState(false);\n  const [showVerificationInput, setShowVerificationInput] = useState(false);\n  const [error, setError] = useState('');\n  const { login, signup, loginAnonymously, setupRecaptcha, confirmPhoneCode, loginWithGithub } = useAuth();\n\n  const getErrorMessage = (errorCode) => {\n    switch (errorCode) {\n      case 'auth/user-not-found':\n        return 'Пользователь с таким email не найден';\n      case 'auth/wrong-password':\n        return 'Неверный пароль';\n      case 'auth/email-already-in-use':\n        return 'Пользователь с таким email уже существует';\n      case 'auth/weak-password':\n        return 'Пароль должен содержать минимум 6 символов';\n      case 'auth/invalid-email':\n        return 'Некорректный email адрес';\n      case 'auth/invalid-phone-number':\n        return 'Неверный формат номера телефона';\n      case 'auth/invalid-verification-code':\n        return 'Неверный код подтверждения';\n      case 'auth/account-exists-with-different-credential':\n        return 'Аккаунт уже существует с другим методом входа';\n      case 'auth/popup-closed-by-user':\n        return 'Окно авторизации было закрыто. Попробуйте еще раз';\n      case 'auth/cancelled-popup-request':\n        return 'Предыдущий запрос авторизации не был завершен';\n      case 'auth/popup-blocked':\n        return 'Всплывающее окно заблокировано браузером. Пожалуйста, разрешите всплывающие окна для этого сайта';\n      case 'auth/unauthorized-domain':\n        return 'Этот домен не авторизован для работы с Firebase. Пожалуйста, проверьте настройки Firebase';\n      default:\n        return 'Произошла ошибка при авторизации';\n    }\n  };\n\n  useEffect(() => {\n    // Очищаем старый рекапчу при размонтировании\n    return () => {\n      if (window.recaptchaVerifier) {\n        window.recaptchaVerifier.clear();\n      }\n    };\n  }, []);\n\n  const setupRecaptchaVerifier = () => {\n    if (!window.recaptchaVerifier) {\n      window.recaptchaVerifier = new RecaptchaVerifier(auth, 'recaptcha-container', {\n        size: 'invisible',\n        callback: () => {\n          // reCAPTCHA solved, allow signInWithPhoneNumber.\n        },\n        'expired-callback': () => {\n          // Response expired. Ask user to solve reCAPTCHA again.\n          setError('Время действия проверки истекло. Попробуйте еще раз.');\n        }\n      });\n    }\n  };\n\n  const formatPhoneNumber = (phone) => {\n    // Убираем все нецифровые символы\n    const cleaned = phone.replace(/\\D/g, '');\n    // Добавляем '+' в начало, если его нет\n    return cleaned.startsWith('+') ? cleaned : `+${cleaned}`;\n  };\n\n  const handleEmailSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    try {\n      if (isLogin) {\n        await login(email, password);\n      } else {\n        if (password !== confirmPassword) {\n          setError('Пароли не совпадают');\n          return;\n        }\n        await signup(email, password);\n      }\n    } catch (err) {\n      setError(getErrorMessage(err.code));\n    }\n  };\n\n  const handlePhoneSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n\n    try {\n      if (!showVerificationInput) {\n        setupRecaptchaVerifier();\n        const formattedPhone = formatPhoneNumber(phoneNumber);\n        console.log('Отправка кода на номер:', formattedPhone);\n        const appVerifier = window.recaptchaVerifier;\n        await setupRecaptcha(formattedPhone, appVerifier);\n        setShowVerificationInput(true);\n      } else {\n        if (!verificationCode || verificationCode.length < 6) {\n          setError('Введите корректный код подтверждения');\n          return;\n        }\n        console.log('Подтверждение кода:', verificationCode);\n        await confirmPhoneCode(verificationCode);\n      }\n    } catch (err) {\n      console.error('Ошибка телефонной авторизации:', err);\n      \n      if (err.code === 'auth/invalid-verification-code') {\n        setError('Неверный код подтверждения');\n      } else if (err.code === 'auth/invalid-phone-number') {\n        setError('Неверный формат номера телефона');\n      } else if (err.code === 'auth/code-expired') {\n        setError('Срок действия кода истек. Попробуйте получить новый код');\n        setShowVerificationInput(false);\n      } else if (err.code === 'auth/too-many-requests') {\n        setError('Слишком много попыток. Попробуйте позже');\n      } else if (err.message) {\n        setError(err.message);\n      } else {\n        setError('Произошла ошибка при авторизации');\n      }\n      \n      // Очищаем reCAPTCHA только если это не ошибка кода подтверждения\n      if (err.code !== 'auth/invalid-verification-code') {\n        if (window.recaptchaVerifier) {\n          window.recaptchaVerifier.clear();\n          window.recaptchaVerifier = null;\n        }\n        setShowVerificationInput(false);\n      }\n    }\n  };\n\n  const handleAnonymousLogin = async () => {\n    setError('');\n    try {\n      await loginAnonymously();\n    } catch (err) {\n      setError(getErrorMessage(err.code));\n    }\n  };\n\n  const handleGithubLogin = async () => {\n    setError('');\n    try {\n      console.log('Начинаем GitHub авторизацию...');\n      await loginWithGithub();\n    } catch (err) {\n      console.error('Ошибка GitHub авторизации:', err);\n      if (err.code) {\n        setError(getErrorMessage(err.code));\n      } else if (err.message) {\n        setError(err.message);\n      } else {\n        setError('Произошла непредвиденная ошибка при авторизации через GitHub');\n      }\n    }\n  };\n\n  const resetForm = () => {\n    setEmail('');\n    setPassword('');\n    setConfirmPassword('');\n    setPhoneNumber('');\n    setVerificationCode('');\n    setShowVerificationInput(false);\n    setError('');\n  };\n\n  const switchAuthMode = () => {\n    setIsLogin(!isLogin);\n    resetForm();\n  };\n\n  return (\n    <div className=\"min-h-[calc(100vh-4rem)] bg-[#121212] flex flex-col items-center justify-center px-6\">\n      <div className=\"w-full max-w-md bg-[#1f1f1f] p-8 rounded-lg shadow-lg\">\n        <h2 className=\"text-2xl font-bold text-white mb-6 text-center\">\n          {isLogin ? 'Вход в аккаунт' : 'Создание аккаунта'}\n        </h2>\n\n        <div className=\"flex justify-center gap-4 mb-6\">\n          <button\n            onClick={() => {\n              setAuthMethod('email');\n              resetForm();\n            }}\n            className={`px-4 py-2 rounded ${\n              authMethod === 'email' ? 'bg-blue-500' : 'bg-gray-700'\n            } text-white`}\n          >\n            Email\n          </button>\n          <button\n            onClick={() => {\n              setAuthMethod('github');\n              resetForm();\n            }}\n            className={`px-4 py-2 rounded ${\n              authMethod === 'github' ? 'bg-blue-500' : 'bg-gray-700'\n            } text-white flex items-center gap-2`}\n          >\n            <svg viewBox=\"0 0 24 24\" className=\"w-5 h-5 fill-current\">\n              <path d=\"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z\"/>\n            </svg>\n            GitHub\n          </button>\n          {isLogin && (\n            <button\n              onClick={() => {\n                setAuthMethod('anonymous');\n                resetForm();\n              }}\n              className={`px-4 py-2 rounded ${\n                authMethod === 'anonymous' ? 'bg-blue-500' : 'bg-gray-700'\n              } text-white`}\n            >\n              Анонимно\n            </button>\n          )}\n        </div>\n\n        {error && (\n          <div className=\"bg-red-500/20 border border-red-500 text-red-100 p-4 rounded mb-6\">\n            {error}\n          </div>\n        )}\n\n        {authMethod === 'email' && (\n          <form onSubmit={handleEmailSubmit} className=\"flex flex-col gap-4\">\n            <input\n              type=\"email\"\n              placeholder=\"Email\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              className=\"p-3 rounded bg-gray-700 text-white border border-gray-600 focus:border-blue-500 outline-none transition-colors\"\n              required\n            />\n            <input\n              type=\"password\"\n              placeholder=\"Пароль\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"p-3 rounded bg-gray-700 text-white border border-gray-600 focus:border-blue-500 outline-none transition-colors\"\n              required\n            />\n            {!isLogin && (\n              <input\n                type=\"password\"\n                placeholder=\"Подтвердите пароль\"\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n                className=\"p-3 rounded bg-gray-700 text-white border border-gray-600 focus:border-blue-500 outline-none transition-colors\"\n                required\n              />\n            )}\n            <button\n              type=\"submit\"\n              className=\"bg-blue-500 text-white px-6 py-3 rounded hover:bg-blue-600 transition-colors font-semibold\"\n            >\n              {isLogin ? 'Войти' : 'Создать аккаунт'}\n            </button>\n          </form>\n        )}\n\n        {authMethod === 'phone' && (\n          <form onSubmit={handlePhoneSubmit} className=\"flex flex-col gap-4\">\n            <div className=\"phone-input-container\">\n              <PhoneInput\n                country={'ru'}\n                value={phoneNumber}\n                onChange={(phone) => {\n                  console.log('Введен номер телефона:', phone);\n                  setPhoneNumber(phone);\n                }}\n                disabled={showVerificationInput}\n                containerClass=\"phone-input\"\n                inputClass=\"!w-full !h-12 !text-white !bg-gray-700 !border-gray-600 !pl-12 !rounded\"\n                buttonClass=\"!bg-gray-700 !border-gray-600 !rounded-l\"\n                dropdownClass=\"!bg-gray-700 !text-white\"\n                searchClass=\"!bg-gray-800 !text-white\"\n                enableSearch={true}\n                searchPlaceholder=\"Поиск страны...\"\n                inputProps={{\n                  required: true,\n                  placeholder: \"Номер телефона\"\n                }}\n              />\n            </div>\n            {showVerificationInput && (\n              <input\n                type=\"text\"\n                placeholder=\"Код подтверждения\"\n                value={verificationCode}\n                onChange={(e) => {\n                  console.log('Введен код:', e.target.value);\n                  setVerificationCode(e.target.value);\n                }}\n                className=\"p-3 rounded bg-gray-700 text-white border border-gray-600 focus:border-blue-500 outline-none transition-colors\"\n                required\n              />\n            )}\n            <div id=\"recaptcha-container\"></div>\n            <button\n              type=\"submit\"\n              className=\"bg-blue-500 text-white px-6 py-3 rounded hover:bg-blue-600 transition-colors font-semibold\"\n            >\n              {showVerificationInput ? 'Подтвердить код' : (isLogin ? 'Войти' : 'Создать аккаунт')}\n            </button>\n          </form>\n        )}\n\n        {authMethod === 'github' && (\n          <button\n            onClick={handleGithubLogin}\n            className=\"w-full bg-gray-800 text-white px-6 py-3 rounded hover:bg-gray-700 transition-colors font-semibold flex items-center justify-center gap-2\"\n          >\n            <svg viewBox=\"0 0 24 24\" className=\"w-6 h-6 fill-current\">\n              <path d=\"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z\"/>\n            </svg>\n            {isLogin ? 'Войти через GitHub' : 'Зарегистрироваться через GitHub'}\n          </button>\n        )}\n\n        {authMethod === 'anonymous' && (\n          <button\n            onClick={handleAnonymousLogin}\n            className=\"w-full bg-blue-500 text-white px-6 py-3 rounded hover:bg-blue-600 transition-colors font-semibold\"\n          >\n            Войти анонимно\n          </button>\n        )}\n\n        <button\n          onClick={switchAuthMode}\n          className=\"text-blue-400 mt-6 hover:underline w-full text-center\"\n        >\n          {isLogin ? 'Создать новый аккаунт' : 'Уже есть аккаунт? Войти'}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Auth;","import { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { auth } from '../firebase';\n\nconst storage = getStorage();\n\nexport const uploadUserAvatar = async (file) => {\n  if (!auth.currentUser) {\n    throw new Error('Пользователь не авторизован');\n  }\n\n  const fileRef = ref(storage, `avatars/${auth.currentUser.uid}/${file.name}`);\n  \n  try {\n    const snapshot = await uploadBytes(fileRef, file);\n    const downloadURL = await getDownloadURL(snapshot.ref);\n    return downloadURL;\n  } catch (error) {\n    console.error('Ошибка при загрузке файла:', error);\n    throw new Error('Ошибка при загрузке аватара');\n  }\n};","import React, { useEffect } from 'react';\n\nconst Toast = ({ message, type = 'success', onClose, duration = 3000 }) => {\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      onClose();\n    }, duration);\n\n    return () => clearTimeout(timer);\n  }, [duration, onClose]);\n\n  const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';\n\n  return (\n    <div className=\"fixed inset-x-0 top-4 mx-auto z-50 flex justify-center animate-fade-in-down\">\n      <div className={`${bgColor} text-white px-6 py-3 rounded-lg shadow-lg max-w-sm text-center`}>\n        {message}\n      </div>\n    </div>\n  );\n};\n\nexport default Toast;","import React, { useState, useRef } from 'react';\nimport { useAuth } from './contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport Auth from './components/Auth';\nimport { uploadUserAvatar } from './services/storageService';\nimport Toast from './components/Toast';\n\nconst Profile = () => {\n  const { user, logout, updateUserProfile, updateUserPassword } = useAuth();\n  const navigate = useNavigate();\n  const [isEditing, setIsEditing] = useState(false);\n  const [userInfo, setUserInfo] = useState({\n    displayName: user?.displayName || '',\n    about: '',\n    skills: []\n  });\n  const [newPassword, setNewPassword] = useState('');\n  const [toast, setToast] = useState({ show: false, message: '', type: 'success' });\n  const fileInputRef = useRef();\n\n  const showToast = (message, type = 'success') => {\n    setToast({ show: true, message, type });\n  };\n\n  const hideToast = () => {\n    setToast({ show: false, message: '', type: 'success' });\n  };\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n    } catch (err) {\n      showToast('Ошибка при выходе', 'error');\n      console.error('Ошибка при выходе:', err);\n    }\n  };\n\n  const handleBack = () => {\n    navigate('/');\n  };\n\n  const handleSaveProfile = async () => {\n    try {\n      await updateUserProfile({\n        displayName: userInfo.displayName,\n        photoURL: user.photoURL\n      });\n      showToast('Профиль успешно обновлен');\n      setIsEditing(false);\n    } catch (err) {\n      showToast('Ошибка при обновлении профиля', 'error');\n    }\n  };\n\n  const handleChangePassword = async () => {\n    try {\n      if (newPassword.length < 6) {\n        showToast('Пароль должен быть не менее 6 символов', 'error');\n        return;\n      }\n      await updateUserPassword(newPassword);\n      showToast('Пароль успешно изменен');\n      setNewPassword('');\n    } catch (err) {\n      showToast('Ошибка при смене пароля', 'error');\n    }\n  };\n\n  const handleAvatarClick = () => {\n    fileInputRef.current.click();\n  };\n\n  const handleFileChange = async (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      try {\n        const photoURL = await uploadUserAvatar(file);\n        await updateUserProfile({\n          ...userInfo,\n          photoURL\n        });\n        showToast('Аватар успешно обновлен');\n      } catch (err) {\n        showToast('Ошибка при загрузке аватара', 'error');\n        console.error(err);\n      }\n    }\n  };\n\n  if (!user) {\n    return <Auth />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#121212] pt-20\">\n      {toast.show && (\n        <Toast\n          message={toast.message}\n          type={toast.type}\n          onClose={hideToast}\n        />\n      )}\n      \n      <div className=\"container mx-auto px-4\">\n        <h1 className=\"text-4xl font-bold text-white mb-8 text-center shimmer-text\">\n          Личный кабинет\n        </h1>\n\n        <div className=\"bg-[#1f1f1f] p-8 rounded-lg max-w-2xl mx-auto\">\n          <div className=\"flex flex-col items-center gap-6\">\n            {/* Аватар */}\n            <div className=\"relative\">\n              <img\n                src={user.photoURL || 'https://via.placeholder.com/150'}\n                alt=\"Аватар\"\n                className=\"w-32 h-32 rounded-full object-cover border-4 border-blue-500 cursor-pointer\"\n                onClick={handleAvatarClick}\n              />\n              <input\n                type=\"file\"\n                ref={fileInputRef}\n                onChange={handleFileChange}\n                accept=\"image/*\"\n                className=\"hidden\"\n              />\n              <button\n                onClick={handleAvatarClick}\n                className=\"absolute bottom-0 right-0 bg-blue-500 p-2 rounded-full hover:bg-blue-600\"\n                title=\"Изменить аватар\"\n              >\n                <svg className=\"w-4 h-4 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                </svg>\n              </button>\n            </div>\n\n            {/* Основная информация */}\n            <div className=\"w-full\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-white text-xl\">Основная информация</h2>\n                <button\n                  onClick={() => setIsEditing(!isEditing)}\n                  className=\"text-blue-500 hover:text-blue-400\"\n                >\n                  {isEditing ? 'Отменить' : 'Редактировать'}\n                </button>\n              </div>\n\n              {isEditing ? (\n                <div className=\"space-y-4\">\n                  <input\n                    type=\"text\"\n                    value={userInfo.displayName}\n                    onChange={(e) => setUserInfo({...userInfo, displayName: e.target.value})}\n                    className=\"w-full bg-[#2d2d2d] text-white p-2 rounded\"\n                    placeholder=\"Ваше имя\"\n                  />\n                  <textarea\n                    value={userInfo.about}\n                    onChange={(e) => setUserInfo({...userInfo, about: e.target.value})}\n                    className=\"w-full bg-[#2d2d2d] text-white p-2 rounded h-32\"\n                    placeholder=\"О себе\"\n                  />\n                  <button\n                    onClick={handleSaveProfile}\n                    className=\"bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600\"\n                  >\n                    Сохранить\n                  </button>\n                </div>\n              ) : (\n                <div className=\"text-white space-y-4\">\n                  <p><span className=\"text-gray-400\">Email:</span> {user.email}</p>\n                  <p><span className=\"text-gray-400\">Имя:</span> {userInfo.displayName || 'Не указано'}</p>\n                  <p><span className=\"text-gray-400\">О себе:</span> {userInfo.about || 'Не указано'}</p>\n                  <p><span className=\"text-gray-400\">Дата регистрации:</span> {new Date(user.metadata.creationTime).toLocaleDateString()}</p>\n                </div>\n              )}\n            </div>\n\n            {/* Смена пароля */}\n            <div className=\"w-full border-t border-gray-700 pt-4\">\n              <h3 className=\"text-white text-lg mb-4\">Безопасность</h3>\n              <div className=\"flex gap-4\">\n                <input\n                  type=\"password\"\n                  value={newPassword}\n                  onChange={(e) => setNewPassword(e.target.value)}\n                  className=\"flex-1 bg-[#2d2d2d] text-white p-2 rounded\"\n                  placeholder=\"Новый пароль\"\n                />\n                <button\n                  onClick={handleChangePassword}\n                  className=\"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700\"\n                >\n                  Сменить пароль\n                </button>\n              </div>\n            </div>\n\n            {/* Кнопки действий */}\n            <div className=\"flex gap-4 mt-6\">\n              <button\n                onClick={handleBack}\n                className=\"bg-blue-500 text-white px-6 py-3 rounded hover:bg-blue-600 transition-colors\"\n              >\n                Назад\n              </button>\n              <button\n                onClick={handleLogout}\n                className=\"bg-red-500 text-white px-6 py-3 rounded hover:bg-red-600 transition-colors\"\n              >\n                Выйти\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;"],"names":["Auth","email","setEmail","useState","password","setPassword","confirmPassword","setConfirmPassword","phoneNumber","setPhoneNumber","verificationCode","setVerificationCode","authMethod","setAuthMethod","isLogin","setIsLogin","showVerificationInput","setShowVerificationInput","error","setError","login","signup","loginAnonymously","setupRecaptcha","confirmPhoneCode","loginWithGithub","useAuth","getErrorMessage","errorCode","useEffect","window","recaptchaVerifier","clear","resetForm","_jsx","className","children","_jsxs","onClick","viewBox","d","onSubmit","async","e","preventDefault","err","code","type","placeholder","value","onChange","target","required","length","console","log","RecaptchaVerifier","auth","size","callback","expired-callback","formattedPhone","phone","cleaned","replace","startsWith","formatPhoneNumber","appVerifier","message","PhoneInput","country","disabled","containerClass","inputClass","buttonClass","dropdownClass","searchClass","enableSearch","searchPlaceholder","inputProps","id","switchAuthMode","storage","getStorage","_ref","onClose","duration","timer","setTimeout","clearTimeout","bgColor","Profile","user","logout","updateUserProfile","updateUserPassword","navigate","useNavigate","isEditing","setIsEditing","userInfo","setUserInfo","displayName","about","skills","newPassword","setNewPassword","toast","setToast","show","fileInputRef","useRef","showToast","arguments","undefined","handleAvatarClick","current","click","Toast","hideToast","src","photoURL","alt","ref","file","files","currentUser","Error","fileRef","uid","name","snapshot","uploadBytes","getDownloadURL","uploadUserAvatar","accept","title","fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","Date","metadata","creationTime","toLocaleDateString","handleBack"],"sourceRoot":""}