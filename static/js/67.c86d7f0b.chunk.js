"use strict";(self.webpackChunkmy_portfolio=self.webpackChunkmy_portfolio||[]).push([[67],{1710:(e,t,l)=>{async function s(e,t){try{const l=`https://nominatim.openstreetmap.org/reverse?lat=${e}&lon=${t}&format=json&accept-language=ru`,s=await fetch(l,{headers:{"User-Agent":"my-portfolio/1.0"}});if(!s.ok)return"";const r=await s.json();return r.address.city||r.address.town||r.address.village||r.address.state||r.address.country||""}catch(l){return""}}l.d(t,{R:()=>s})},2662:(e,t,l)=>{l.d(t,{A:()=>a});var s=l(5043),r=l(579);const o=["\u041c\u043e\u0441\u043a\u0432\u0430","\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433","\u041d\u043e\u0432\u043e\u0441\u0438\u0431\u0438\u0440\u0441\u043a","\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0431\u0443\u0440\u0433","\u041a\u0430\u0437\u0430\u043d\u044c","\u041d\u0438\u0436\u043d\u0438\u0439 \u041d\u043e\u0432\u0433\u043e\u0440\u043e\u0434","\u0427\u0435\u043b\u044f\u0431\u0438\u043d\u0441\u043a","\u0421\u0430\u043c\u0430\u0440\u0430","\u0420\u043e\u0441\u0442\u043e\u0432-\u043d\u0430-\u0414\u043e\u043d\u0443","\u0423\u0444\u0430","\u041a\u0440\u0430\u0441\u043d\u043e\u044f\u0440\u0441\u043a","\u0412\u043e\u0440\u043e\u043d\u0435\u0436","\u041f\u0435\u0440\u043c\u044c","\u0412\u043e\u043b\u0433\u043e\u0433\u0440\u0430\u0434","\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440","\u0421\u043e\u0447\u0438","\u041e\u043c\u0441\u043a","\u0422\u044e\u043c\u0435\u043d\u044c","\u0418\u0440\u043a\u0443\u0442\u0441\u043a","\u0425\u0430\u0431\u0430\u0440\u043e\u0432\u0441\u043a","\u0412\u043b\u0430\u0434\u0438\u0432\u043e\u0441\u0442\u043e\u043a","\u042f\u0440\u043e\u0441\u043b\u0430\u0432\u043b\u044c","\u0422\u043e\u043c\u0441\u043a","\u0411\u0430\u0440\u043d\u0430\u0443\u043b","\u041a\u0430\u043b\u0438\u043d\u0438\u043d\u0433\u0440\u0430\u0434","\u0421\u0430\u0440\u0430\u0442\u043e\u0432","\u0422\u0443\u043b\u0430","\u041a\u0430\u043b\u0443\u0433\u0430","\u041a\u0443\u0440\u0441\u043a","\u0411\u0435\u043b\u0433\u043e\u0440\u043e\u0434","\u0414\u0440\u0443\u0433\u043e\u0439..."],a=e=>{let{value:t,onChange:l,placeholder:a="\u0413\u043e\u0440\u043e\u0434, \u0441\u0442\u0440\u0430\u043d\u0430"}=e;const[n,i]=(0,s.useState)([]),[d,c]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:t,onChange:e=>{const t=e.target.value;if(l(t),t.length>0){const e=o.filter((e=>e.toLowerCase().includes(t.toLowerCase())));i(e.length?e:["\u0414\u0440\u0443\u0433\u043e\u0439..."]),c(!0)}else i([]),c(!1)},placeholder:a,className:"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",autoComplete:"off",onFocus:()=>t&&c(!0),onBlur:()=>setTimeout((()=>c(!1)),100)}),d&&n.length>0&&(0,r.jsx)("ul",{className:"absolute z-10 left-0 right-0 bg-[#23272f] border border-[#374151] rounded-lg mt-1 max-h-48 overflow-y-auto shadow-lg",children:n.map(((e,t)=>(0,r.jsx)("li",{className:"px-4 py-2 cursor-pointer hover:bg-blue-600 hover:text-white text-gray-200",onMouseDown:()=>(e=>{l("\u0414\u0440\u0443\u0433\u043e\u0439..."===e?"":e),c(!1)})(e),children:e},e+t)))})]})}},9067:(e,t,l)=>{l.r(t),l.d(t,{default:()=>m});var s=l(5043),r=l(6662),o=l(5016),a=l(5472),n=l(3023),i=l(2095),d=l(2662),c=l(1710),u=l(579);const m=()=>{const e=(0,r.Zp)(),{user:t}=(0,o.As)(),[l,m]=(0,s.useState)({fullName:"",phone:"",bio:"",location:"",skills:"",github:"",website:""}),[b,x]=(0,s.useState)(""),[h,g]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(!l.location&&"undefined"!==typeof window){const e=localStorage.getItem("userLocation");if(e&&"denied"!==e&&"unsupported"!==e)try{const{lat:t,lon:l}=JSON.parse(e);(0,c.R)(t,l).then((e=>{e&&m((t=>({...t,location:e})))}))}catch{}}}),[]);const[f,p]=(0,s.useState)({}),[y,N]=(0,s.useState)(null);(0,s.useEffect)((()=>{if(!t)return;y&&clearTimeout(y);const e=function(e){const l={};return(!e.fullName||e.fullName.trim().length<3)&&(l.fullName="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0424\u0418\u041e (\u043c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430)"),/^\+7 \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(e.phone)||(l.phone="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 +7 (XXX) XXX-XX-XX"),null!==t&&void 0!==t&&t.email&&/^\S+@\S+\.\S+$/.test(t.email)||(l.email="\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"),(!e.location||e.location.trim().length<2)&&(l.location="\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"),l}(l);if(p(e),0===Object.keys(e).length){const e=setTimeout((()=>{const e=(0,a.H9)(n.db,"users",t.uid);(0,a.BN)(e,{...l,email:t.email,updatedAt:(new Date).toISOString()},{merge:!0})}),1e3);return N(e),()=>clearTimeout(e)}}),[l]);const j=e=>{const{name:t,value:l}=e.target;m((e=>({...e,[t]:l})))};return(0,u.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#121212] py-12 px-4 sm:px-6 lg:px-8",children:(0,u.jsxs)("div",{className:"max-w-xl w-full space-y-8 bg-[#23272f] p-8 rounded-2xl shadow-2xl border border-[#2d3748]",children:[(0,u.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-white",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"}),b&&(0,u.jsx)("div",{className:"bg-red-500/20 border border-red-500 text-red-100 px-4 py-2 rounded mb-4",role:"alert",children:(0,u.jsx)("span",{className:"block sm:inline",children:b})}),(0,u.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async s=>{s.preventDefault(),g(!0),x("");try{const s=(0,a.H9)(n.db,"users",t.uid);await(0,a.BN)(s,{...l,email:t.email,updatedAt:(new Date).toISOString()},{merge:!0}),e("/profile")}catch(r){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f:",r),x("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0444\u0438\u043b\u044f")}finally{g(!1)}},children:[(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"\u0424\u0418\u041e"}),(0,u.jsx)("input",{type:"text",name:"fullName",value:l.fullName,onChange:j,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041e \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e",className:`w-full px-4 py-3 rounded-lg bg-[#181c23] border ${f.fullName?"border-red-500":"border-[#374151]"} text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition`,required:!0}),f.fullName&&(0,u.jsx)("div",{className:"text-red-400 text-xs mt-1",children:f.fullName})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),(0,u.jsx)(i._g,{mask:"+7 (000) 000-00-00",value:l.phone,onAccept:e=>{m((t=>({...t,phone:e})))},unmask:!1,placeholder:"+7 (___) ___-__-__",className:`w-full px-4 py-3 rounded-lg bg-[#181c23] border ${f.phone?"border-red-500":"border-[#374151]"} text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition`,required:!0}),f.phone&&(0,u.jsx)("div",{className:"text-red-400 text-xs mt-1",children:f.phone})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),(0,u.jsx)("input",{type:"email",value:(null===t||void 0===t?void 0:t.email)||"",readOnly:!0,className:`w-full px-4 py-3 rounded-lg bg-[#181c23] border ${f.email?"border-red-500":"border-[#374151]"} text-gray-400 cursor-not-allowed`}),f.email&&(0,u.jsx)("div",{className:"text-red-400 text-xs mt-1",children:f.email})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"\u041e \u0441\u0435\u0431\u0435"}),(0,u.jsx)("textarea",{name:"bio",value:l.bio,onChange:j,rows:"3",placeholder:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435...",className:"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"\u041c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"}),(0,u.jsx)(d.A,{value:l.location,onChange:e=>m((t=>({...t,location:e}))),placeholder:"\u0413\u043e\u0440\u043e\u0434, \u0441\u0442\u0440\u0430\u043d\u0430"}),f.location&&(0,u.jsx)("div",{className:"text-red-400 text-xs mt-1",children:f.location})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"\u041d\u0430\u0432\u044b\u043a\u0438"}),(0,u.jsx)("input",{type:"text",name:"skills",value:l.skills,onChange:j,placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: React, Node.js, Python",className:"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),(0,u.jsxs)("div",{className:"flex gap-4",children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"GitHub"}),(0,u.jsx)("input",{type:"url",name:"github",value:l.github,onChange:j,placeholder:"https://github.com/username",className:"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"}),(0,u.jsx)("input",{type:"url",name:"website",value:l.website,onChange:j,placeholder:"https://example.com",className:"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"})]})]})]}),(0,u.jsxs)("div",{className:"pt-6 flex flex-col gap-4",children:[(0,u.jsx)("button",{type:"submit",disabled:h,className:"w-full py-3 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold text-lg shadow-md transition disabled:opacity-60",children:h?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),(0,u.jsx)("button",{type:"button",onClick:()=>e("/profile"),className:"w-full py-3 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-200 font-semibold text-lg border border-gray-500 transition",children:"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c"})]})]})]})})}}}]);
//# sourceMappingURL=67.c86d7f0b.chunk.js.map