{"version":3,"file":"static/js/41.91105ef3.chunk.js","mappings":"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","sources":["utils/geoUtils.js","components/LocationAutocomplete.js","components/Toast.js","Profile.js"],"sourcesContent":["// utils/geoUtils.js\n// Получение города по координатам через Nominatim (OpenStreetMap)\nexport async function getCityByCoords(lat, lon) {\n  try {\n    const url = `https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lon}&format=json&accept-language=ru`;\n    const res = await fetch(url, { headers: { 'User-Agent': 'my-portfolio/1.0' } });\n    if (!res.ok) return '';\n    const data = await res.json();\n    // Варианты: city, town, village, state, country\n    return (\n      data.address.city ||\n      data.address.town ||\n      data.address.village ||\n      data.address.state ||\n      data.address.country ||\n      ''\n    );\n  } catch (e) {\n    return '';\n  }\n}\n","import React, { useState } from 'react';\n\n// Пример списка городов РФ (можно расширить или подключить внешний API)\nconst cities = [\n  'Москва',\n  'Санкт-Петербург',\n  'Новосибирск',\n  'Екатеринбург',\n  'Казань',\n  'Нижний Новгород',\n  'Челябинск',\n  'Самара',\n  'Ростов-на-Дону',\n  'Уфа',\n  'Красноярск',\n  'Воронеж',\n  'Пермь',\n  'Волгоград',\n  'Краснодар',\n  'Сочи',\n  'Омск',\n  'Тюмень',\n  'Иркутск',\n  'Хабаровск',\n  'Владивосток',\n  'Ярославль',\n  'Томск',\n  'Барнаул',\n  'Калининград',\n  'Саратов',\n  'Тула',\n  'Калуга',\n  'Курск',\n  'Белгород',\n  'Другой...'\n];\n\nconst LocationAutocomplete = ({ value, onChange, placeholder = 'Город, страна' }) => {\n  const [suggestions, setSuggestions] = useState([]);\n  const [show, setShow] = useState(false);\n\n  const handleInput = (e) => {\n    const val = e.target.value;\n    onChange(val);\n    if (val.length > 0) {\n      const filtered = cities.filter(city => city.toLowerCase().includes(val.toLowerCase()));\n      setSuggestions(filtered.length ? filtered : ['Другой...']);\n      setShow(true);\n    } else {\n      setSuggestions([]);\n      setShow(false);\n    }\n  };\n\n  const handleSelect = (city) => {\n    onChange(city === 'Другой...' ? '' : city);\n    setShow(false);\n  };\n\n  return (\n    <div className=\"relative\">\n      <input\n        type=\"text\"\n        value={value}\n        onChange={handleInput}\n        placeholder={placeholder}\n        className=\"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition\"\n        autoComplete=\"off\"\n        onFocus={() => value && setShow(true)}\n        onBlur={() => setTimeout(() => setShow(false), 100)}\n      />\n      {show && suggestions.length > 0 && (\n        <ul className=\"absolute z-10 left-0 right-0 bg-[#23272f] border border-[#374151] rounded-lg mt-1 max-h-48 overflow-y-auto shadow-lg\">\n          {suggestions.map((city, idx) => (\n            <li\n              key={city + idx}\n              className=\"px-4 py-2 cursor-pointer hover:bg-blue-600 hover:text-white text-gray-200\"\n              onMouseDown={() => handleSelect(city)}\n            >\n              {city}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default LocationAutocomplete;\n","import React, { useEffect, useState } from 'react';\n\nconst FADE_DURATION = 400; // миллисекунд\n\nconst Toast = ({ message, type = 'success', onClose, duration = 1000 }) => {\n  const [visible, setVisible] = useState(false);\n\n  useEffect(() => {\n    // Плавное появление\n    const showTimer = setTimeout(() => {\n      setVisible(true);\n    }, 10); // небольшой таймаут для срабатывания transition\n\n    // Скрываем уведомление чуть раньше, чтобы успела проиграться анимация\n    const hideTimer = setTimeout(() => {\n      setVisible(false);\n    }, duration - FADE_DURATION);\n\n    // onClose вызываем после fade-out\n    const closeTimer = setTimeout(() => {\n      onClose();\n    }, duration);\n\n    return () => {\n      clearTimeout(showTimer);\n      clearTimeout(hideTimer);\n      clearTimeout(closeTimer);\n    };\n  }, [duration, onClose]);\n\n  const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';\n\n  return (\n    <div\n      className={`fixed inset-x-0 top-4 mx-auto z-50 flex justify-center pointer-events-none transition-opacity duration-[${FADE_DURATION}ms] ${visible ? 'opacity-100' : 'opacity-0'}`}\n      style={{ transition: `opacity ${FADE_DURATION}ms cubic-bezier(0.4,0,0.2,1)` }}\n    >\n      <div\n        className={`${bgColor} text-white px-6 py-3 rounded-lg shadow-lg max-w-sm text-center pointer-events-auto transition-transform duration-[${FADE_DURATION}ms] ${visible ? 'scale-100' : 'scale-95'}`}\n        style={{ transition: `transform ${FADE_DURATION}ms cubic-bezier(0.4,0,0.2,1)` }}\n      >\n        {message}\n      </div>\n    </div>\n  );\n};\n\nexport default Toast;","import React, { useState, useEffect } from 'react';\nimport { useAuth } from './contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport Auth from './components/Auth';\nimport { subscribeToUserData } from './services/databaseService';\nimport Toast from './components/Toast';\nimport { IMaskInput } from 'react-imask';\nimport LocationAutocomplete from './components/LocationAutocomplete';\nimport { getCityByCoords } from './utils/geoUtils';\n\nconst Profile = () => {\n  const { user, logout, updateUserProfile } = useAuth();\n  const navigate = useNavigate();\n  const [userInfo, setUserInfo] = useState({\n    fullName: '',\n    phone: '',\n    displayName: '',\n    bio: '',\n    location: '',\n    skills: '',\n    github: '',\n    website: '',\n    email: ''\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [toast, setToast] = useState({ show: false, message: '', type: 'success' });\n  const [profileError, setProfileError] = useState('');\n  const [validationErrors, setValidationErrors] = useState({});\n  const [autoSaveTimer, setAutoSaveTimer] = useState(null);\n\n  useEffect(() => {\n    let unsubscribe;\n\n    if (user) {\n      unsubscribe = subscribeToUserData(user.uid, (data) => {\n        let location = data.location || '';\n        // Если поле location пустое, пробуем взять из localStorage (геолокация)\n        if (!location && typeof window !== 'undefined') {\n          const loc = localStorage.getItem('userLocation');\n          if (loc && loc !== 'denied' && loc !== 'unsupported') {\n            try {\n              const { lat, lon } = JSON.parse(loc);\n              getCityByCoords(lat, lon).then(city => {\n                if (city) setUserInfo(prev => ({ ...prev, location: city }));\n              });\n            } catch {}\n          }\n        }\n        setUserInfo({\n          fullName: data.fullName || '',\n          phone: data.phone || '',\n          displayName: data.displayName || '',\n          bio: data.bio || '',\n          location: location,\n          skills: data.skills || '',\n          github: data.github || '',\n          website: data.website || '',\n          email: user.email || ''\n        });\n      });\n    }\n\n    return () => {\n      if (unsubscribe) {\n        unsubscribe();\n      }\n    };\n  }, [user]);\n\n  const showToast = (message, type = 'success') => {\n    setToast({ show: true, message, type });\n    setTimeout(() => {\n      setToast({ show: false, message: '', type: 'success' });\n    }, 1000);\n  };\n\n  const handleLogout = async () => {\n    setIsLoading(true);\n    try {\n      await logout();\n      navigate('/');\n    } catch (err) {\n      showToast('Ошибка при выходе из системы. Попробуйте еще раз', 'error');\n      console.error('Ошибка при выходе:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSaveProfile = async () => {\n    setIsLoading(true);\n    setProfileError('');\n    try {\n      await updateUserProfile(userInfo);\n      showToast('Профиль успешно обновлен');\n    } catch (err) {\n      console.error('Ошибка при обновлении профиля:', err);\n      setProfileError(err.message || String(err));\n      showToast('Ошибка при обновлении профиля', 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Валидация профиля\n  function validateProfile(data) {\n    const errors = {};\n    if (!data.fullName || data.fullName.trim().length < 3) {\n      errors.fullName = 'Введите корректное ФИО (минимум 3 символа)';\n    }\n    if (!/^\\+7 \\(\\d{3}\\) \\d{3}-\\d{2}-\\d{2}$/.test(data.phone)) {\n      errors.phone = 'Введите телефон в формате +7 (XXX) XXX-XX-XX';\n    }\n    if (!data.email || !/^\\S+@\\S+\\.\\S+$/.test(data.email)) {\n      errors.email = 'Некорректный email';\n    }\n    if (!data.location || data.location.trim().length < 2) {\n      errors.location = 'Укажите местоположение';\n    }\n    return errors;\n  }\n\n  // Автосохранение профиля при изменении\n  useEffect(() => {\n    if (!user) return;\n    if (autoSaveTimer) clearTimeout(autoSaveTimer);\n    const errors = validateProfile(userInfo);\n    setValidationErrors(errors);\n    if (Object.keys(errors).length === 0) {\n      // Сохраняем с задержкой (debounce)\n      const timer = setTimeout(() => {\n        updateUserProfile(userInfo).catch((err) => {\n          setProfileError('Ошибка автосохранения: ' + (err.message || String(err)));\n        });\n      }, 1000);\n      setAutoSaveTimer(timer);\n      return () => clearTimeout(timer);\n    }\n    // eslint-disable-next-line\n  }, [userInfo]);\n\n  if (!user) {\n    return <Auth />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#121212] py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-xl mx-auto bg-[#23272f] rounded-2xl shadow-2xl overflow-hidden border border-[#2d3748]\">\n        {toast.show && (\n          <div className=\"pointer-events-none\">\n            <Toast \n              message={toast.message} \n              type={toast.type} \n              onClose={() => setToast({ show: false, message: '', type: 'success' })}\n            />\n          </div>\n        )}\n        <div className=\"px-8 py-8 sm:p-10\">\n          <div className=\"flex justify-end mb-6\">\n            <button\n              onClick={handleLogout}\n              disabled={isLoading}\n              className=\"px-5 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white font-semibold shadow-md transition disabled:opacity-60\"\n            >\n              {isLoading ? 'Выход...' : 'Выйти'}\n            </button>\n          </div>\n          <h3 className=\"text-2xl font-bold text-white mb-8 text-center tracking-wide\">\n            Личные данные\n          </h3>\n          {profileError && (\n            <div className=\"bg-red-500/20 border border-red-500 text-red-100 px-4 py-2 rounded mb-4\">\n              {profileError}\n            </div>\n          )}\n          <form className=\"space-y-6\" onSubmit={e => { e.preventDefault(); handleSaveProfile(); }}>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-300 mb-1\">ФИО</label>\n              <input\n                type=\"text\"\n                value={userInfo.fullName}\n                onChange={e => setUserInfo({ ...userInfo, fullName: e.target.value })}\n                placeholder=\"Введите ФИО полностью\"\n                className={`w-full px-4 py-3 rounded-lg bg-[#181c23] border ${validationErrors.fullName ? 'border-red-500' : 'border-[#374151]'} text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition`}\n                required\n              />\n              {validationErrors.fullName && <div className=\"text-red-400 text-xs mt-1\">{validationErrors.fullName}</div>}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-300 mb-1\">Телефон</label>\n              <IMaskInput\n                mask=\"+7 (000) 000-00-00\"\n                value={userInfo.phone}\n                onAccept={value => setUserInfo({ ...userInfo, phone: value })}\n                unmask={false}\n                placeholder=\"+7 (___) ___-__-__\"\n                className={`w-full px-4 py-3 rounded-lg bg-[#181c23] border ${validationErrors.phone ? 'border-red-500' : 'border-[#374151]'} text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition`}\n                required\n              />\n              {validationErrors.phone && <div className=\"text-red-400 text-xs mt-1\">{validationErrors.phone}</div>}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-300 mb-1\">Email</label>\n              <input\n                type=\"email\"\n                value={userInfo.email}\n                readOnly\n                className={`w-full px-4 py-3 rounded-lg bg-[#181c23] border ${validationErrors.email ? 'border-red-500' : 'border-[#374151]'} text-gray-400 cursor-not-allowed`}\n              />\n              {validationErrors.email && <div className=\"text-red-400 text-xs mt-1\">{validationErrors.email}</div>}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-300 mb-1\">О себе</label>\n              <textarea\n                value={userInfo.bio}\n                onChange={e => setUserInfo({ ...userInfo, bio: e.target.value })}\n                rows=\"3\"\n                placeholder=\"Расскажите о себе...\"\n                className=\"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-300 mb-1\">Местоположение</label>\n              <LocationAutocomplete\n                value={userInfo.location}\n                onChange={val => setUserInfo({ ...userInfo, location: val })}\n                placeholder=\"Город, страна\"\n              />\n              {validationErrors.location && <div className=\"text-red-400 text-xs mt-1\">{validationErrors.location}</div>}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-300 mb-1\">Навыки</label>\n              <input\n                type=\"text\"\n                value={userInfo.skills}\n                onChange={e => setUserInfo({ ...userInfo, skills: e.target.value })}\n                placeholder=\"Например: React, Node.js, Python\"\n                className=\"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition\"\n              />\n            </div>\n            <div className=\"flex gap-4\">\n              <div className=\"flex-1\">\n                <label className=\"block text-sm font-medium text-gray-300 mb-1\">GitHub</label>\n                <input\n                  type=\"url\"\n                  value={userInfo.github}\n                  onChange={e => setUserInfo({ ...userInfo, github: e.target.value })}\n                  placeholder=\"https://github.com/username\"\n                  className=\"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition\"\n                />\n              </div>\n              <div className=\"flex-1\">\n                <label className=\"block text-sm font-medium text-gray-300 mb-1\">Личный сайт</label>\n                <input\n                  type=\"url\"\n                  value={userInfo.website}\n                  onChange={e => setUserInfo({ ...userInfo, website: e.target.value })}\n                  placeholder=\"https://example.com\"\n                  className=\"w-full px-4 py-3 rounded-lg bg-[#181c23] border border-[#374151] text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition\"\n                />\n              </div>\n            </div>\n            <div className=\"pt-6\">\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"w-full py-3 rounded-lg bg-blue-600 hover:bg-blue-700 text-white font-semibold text-lg shadow-md transition disabled:opacity-60\"\n              >\n                {isLoading ? 'Сохранение...' : 'Сохранить изменения'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;"],"names":["async","getCityByCoords","lat","lon","url","res","fetch","headers","ok","data","json","address","city","town","village","state","country","e","cities","_ref","value","onChange","placeholder","suggestions","setSuggestions","useState","show","setShow","_jsxs","className","children","_jsx","type","val","target","length","filtered","filter","toLowerCase","includes","autoComplete","onFocus","onBlur","setTimeout","map","idx","onMouseDown","handleSelect","FADE_DURATION","message","onClose","duration","visible","setVisible","useEffect","showTimer","hideTimer","closeTimer","clearTimeout","bgColor","style","transition","Profile","user","logout","updateUserProfile","useAuth","navigate","useNavigate","userInfo","setUserInfo","fullName","phone","displayName","bio","location","skills","github","website","email","isLoading","setIsLoading","toast","setToast","profileError","setProfileError","validationErrors","setValidationErrors","autoSaveTimer","setAutoSaveTimer","unsubscribe","subscribeToUserData","uid","window","loc","localStorage","getItem","JSON","parse","then","prev","showToast","arguments","undefined","errors","trim","test","validateProfile","Object","keys","timer","catch","err","String","Toast","onClick","console","error","disabled","onSubmit","preventDefault","handleSaveProfile","required","IMaskInput","mask","onAccept","unmask","readOnly","rows","LocationAutocomplete","Auth"],"sourceRoot":""}